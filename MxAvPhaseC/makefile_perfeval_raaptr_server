# makefile for RAAPTR.  Sep 29, 2022

OBJ = test_perfeval_raaptr.o perfeval_omp.o  LLR_Mp_Av.o  maxphaseutils.o ptapso.o gslhdf5_io.o loadRAAPTR.o
CC = gcc -O3 #-g # no optimization and for debug

CXXFLAGS = /home/qyq/miniconda3/include
CXXLIBS = /home/qyq/miniconda3/lib

perfeval_raaptr: $(OBJ)
	$(CC) -fopenmp $(OBJ) -L$(CXXLIBS) -lhdf5 -lhdf5_hl -lm -lz -lgsl -lgslcblas -o TESTH5IO/perfeval_raaptr_server

test_perfeval_raaptr.o: test_perfeval_raaptr.c
	$(CC) -c  -I$(CXXFLAGS) test_perfeval_raaptr.c

gslhdf5_io.o: gslhdf5_io.c
	$(CC) -c -I$(CXXFLAGS) gslhdf5_io.c

perfeval_omp.o: perfeval_omp.c
	$(CC) -c -fopenmp -I$(CXXFLAGS) perfeval_omp.c

LLR_Mp_Av.o: LLR_Mp_Av.c
	$(CC) -c LLR_Mp_Av.c -I$(CXXFLAGS)

maxphaseutils.o: maxphaseutils.c
	$(CC) -c maxphaseutils.c -I$(CXXFLAGS)

ptapso.o: ptapso.c
	$(CC) -c ptapso.c -I$(CXXFLAGS)

loadRAAPTR.o: loadRAAPTR.c
	$(CC) -c loadRAAPTR.c -I$(CXXFLAGS)

.PHONY: clean
clean:
	rm *.o
	echo ALL DONE!
# EOF
